<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout | Swara's Fashion</title>
    <meta name="description"
        content="Discover exquisite short Kurtis in vibrant colors. Luxury fashion for the modern woman.">
    <link rel="stylesheet" href="static/styles.css">
    
</head>

<body>

    <!-- Header -->
    <header>
        <div class="container nav-container">
            <a href="index.html" class="logo-wrapper">
                <img src="static/images/logo.jpg" alt="Swara's Fashion Logo"
                    class="brand-logo">
            </a>
            <nav>
                <ul class="nav-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="shop.html">Collection</a></li>
                    <li><a href="index.html#about">About</a></li>
                    <li><a href="index.html#reviews">Reviews</a></li>
                    <li><a href="index.html#contact">Contact</a></li>

                    <li><a href="login.html">Login</a></li>
                </ul>
            </nav>
            <div class="header-controls" style="display: flex; gap: 1rem; align-items: center;">
                <div class="cart-btn" id="cartToggle">
                    ðŸ›’ <span id="cartCount">0</span>
                </div>
                <div class="mobile-menu-btn">â˜°</div>
            </div>
        </div>
    </header>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3>Your Basket</h3>
            <span class="close-cart" id="closeCart">&times;</span>
        </div>
        <div class="cart-items" id="cartItems">
            <!-- Items injected by JS -->
            <p style="text-align:center; padding: 2rem;">Your basket is empty.</p>
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span id="cartTotal">â‚¹ 0</span>
            </div>
            <a href="checkout.html" class="btn btn-primary"
                style="width: 100%; text-align: center; display: block;">Checkout</a>
        </div>
    </div>
    <div class="cart-overlay" id="cartOverlay"></div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">Product added to bag!</div>

    <!-- Main Content -->
    
<section class="checkout-section">
    <div class="container">
        <h1 class="page-title">Checkout</h1>

        <div class="checkout-grid">
            <!-- Left Column: Details -->
            <div class="checkout-left">
                <!-- Product Details -->
                <div class="checkout-card">
                    <h2 class="card-title">Product Details</h2>

                    <div id="checkoutItemsContainer">
                        <!-- Items injected by JS -->
                        <p>Your cart is empty.</p>
                        <a href="shop.html" class="btn btn-primary">Shop Now</a>
                    </div>
                </div>

                <!-- Delivery Address -->
                <div class="checkout-card address-card">
                    <div class="card-header-row">
                        <h2 class="card-title">Delivery Address</h2>
                        <span class="change-btn" onclick="openAddressModal()">CHANGE</span>
                    </div>
                    <div class="address-details">
                        <h3 class="user-name">Guest User</h3>
                        <p style="color: #ff4444;">No delivery address added.</p>
                        <p>Please click CHANGE to add details.</p>
                    </div>
                </div>
            </div>

            <!-- Right Column: Price Summary -->
            <div class="checkout-right" id="priceSummaryContainer" style="display: none;">
                <div class="checkout-card price-card">
                    <h2 class="card-title" id="itemsCountTitle">Price Details (0 Items)</h2>

                    <div class="price-row">
                        <span>Total Product Price</span>
                        <span id="summaryTotalPrice">+ â‚¹ 0</span>
                    </div>

                    <div class="price-row discount">
                        <span>Total Discounts</span>
                        <span id="summaryDiscount">- â‚¹ 0</span>
                    </div>

                    <div class="divider"></div>

                    <div class="price-row total">
                        <span>Order Total</span>
                        <span id="summaryFinalTotal">â‚¹ 0</span>
                    </div>

                    <div id="discountBanner" class="discount-banner" style="display: none;">
                        Yay! Your total discount is <span class="highlight" id="bannerDiscountAmount">â‚¹ 0</span>
                    </div>

                    <p class="info-text">Clicking on 'Continue' will not deduct any money</p>

                    <a href="payment.html" class="btn btn-primary"
                        style="width: auto; display: inline-block; padding: 0.8rem 2rem; margin-top: 1rem;">Continue</a>

                    <div class="trust-badge">
                        <div class="shield-icon">ðŸ›¡</div>
                        <div>
                            <strong>Your Safety, Our Priority</strong>
                            <p>We ensure your package is safe at every point of contact.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Address Modal -->
<div id="addressModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeAddressModal()">&times;</span>
        <h2>Update Address</h2>
        <form id="addressForm">
            <div class="form-group">
                <label>Full Address</label>
                <input type="text" name="address" required placeholder="House No, Street Area">
            </div>
            <div class="form-group">
                <label>City</label>
                <input type="text" name="city" required placeholder="Mumbai">
            </div>
            <div class="form-group">
                <label>Pincode</label>
                <input type="text" name="pincode" required placeholder="400001">
            </div>
            <div class="form-group">
                <label>Phone Number</label>
                <input type="text" name="phone" required placeholder="+91 98765 43210">
            </div>
            <button type="submit" class="btn btn-primary btn-block">Save Address</button>
        </form>
    </div>
</div>

<script>
    const modal = document.getElementById('addressModal');
    function openAddressModal() {
        modal.style.display = 'block';
    }
    function closeAddressModal() {
        modal.style.display = 'none';
    }
    window.onclick = function (event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }

    // Static Site Address Logic
    document.addEventListener('DOMContentLoaded', () => {
        const cart = JSON.parse(localStorage.getItem('swara_cart')) || {};
        const address = JSON.parse(localStorage.getItem('swara_address')) || null;

        // Render Items
        const container = document.getElementById('checkoutItemsContainer');
        const items = Object.values(cart);
        if (items.length > 0) {
            container.innerHTML = '';
            items.forEach(item => {
                const html = `
                    <div class="checkout-item">
                        <div class="checkout-item-img">
                            <img src="${item.image}" alt="${item.name}">
                        </div>
                        <div class="checkout-item-info">
                            <h3>${item.name}</h3>
                            <p class="checkout-price">â‚¹ ${item.price.toLocaleString('en-IN')}</p>
                            <p class="checkout-meta">Qty: ${item.quantity}</p>
                            <p class="checkout-seller">Sold by: Swara's Fashion</p>
                            <span class="free-delivery">Free Delivery</span>
                        </div>
                        <div class="checkout-item-action">
                            <a href="#" onclick="if(window.toggleCart) window.toggleCart(); return false;" class="edit-btn">EDIT</a>
                        </div>
                    </div>
                `;
                container.insertAdjacentHTML('beforeend', html);
            });

            // Calculate Prices
            const totalPrice = items.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const discount = totalPrice > 5000 ? totalPrice * 0.10 : 0;
            const finalTotal = totalPrice - discount;

            document.getElementById('priceSummaryContainer').style.display = 'block';
            document.getElementById('itemsCountTitle').textContent = `Price Details (${items.length} Items)`;
            document.getElementById('summaryTotalPrice').textContent = `+ â‚¹ ${totalPrice.toLocaleString('en-IN')}`;
            document.getElementById('summaryDiscount').textContent = `- â‚¹ ${discount.toLocaleString('en-IN')}`;
            document.getElementById('summaryFinalTotal').textContent = `â‚¹ ${finalTotal.toLocaleString('en-IN')}`;

            if (discount > 0) {
                document.getElementById('discountBanner').style.display = 'block';
                document.getElementById('bannerDiscountAmount').textContent = `â‚¹ ${discount.toLocaleString('en-IN')}`;
            }
        }

        // Render Address
        const addressDetails = document.querySelector('.address-details');
        if (address) {
            addressDetails.innerHTML = `
                <h3 class="user-name">${address.name || 'Customer'}</h3>
                <p>${address.street}</p>
                <p>${address.city} - ${address.pincode}</p>
                <p>Phone: ${address.phone}</p>
            `;
            // Fill form
            const form = document.getElementById('addressForm');
            form.elements['address'].value = address.street;
            form.elements['city'].value = address.city;
            form.elements['pincode'].value = address.pincode;
            form.elements['phone'].value = address.phone;
        }

        // Handle Address Save
        document.getElementById('addressForm').onsubmit = (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const newAddress = {
                name: 'Customer',
                street: formData.get('address'),
                city: formData.get('city'),
                pincode: formData.get('pincode'),
                phone: formData.get('phone')
            };
            localStorage.setItem('swara_address', JSON.stringify(newAddress));
            location.reload();
        };
    });
</script>


    <!-- Footer -->
    <footer id="contact">
        <div class="container">
            <img src="static/images/logo.jpg" alt="Swara's Fashion Footer Logo"
                class="footer-brand-logo">
            <p>Redefining Luxury Ethnic Wear</p>
            <br>
            <div class="copyright">
                &copy; 2026 Swara's Fashion. All rights reserved.
            </div>
        </div>
    </footer>

    <script src="static/script.js"></script>
    
</body>

</html>