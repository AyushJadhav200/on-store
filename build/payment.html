<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment | Swara's Fashion</title>
    <meta name="description"
        content="Discover exquisite short Kurtis in vibrant colors. Luxury fashion for the modern woman.">
    <link rel="stylesheet" href="static/styles.css">
    
</head>

<body>

    <!-- Header -->
    <header>
        <div class="container nav-container">
            <a href="index.html" class="logo-wrapper">
                <img src="static/images/logo.jpg" alt="Swara's Fashion Logo"
                    class="brand-logo">
            </a>
            <nav>
                <ul class="nav-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="shop.html">Collection</a></li>
                    <li><a href="index.html#about">About</a></li>
                    <li><a href="index.html#reviews">Reviews</a></li>
                    <li><a href="index.html#contact">Contact</a></li>

                    <li><a href="login.html">Login</a></li>
                </ul>
            </nav>
            <div class="header-controls" style="display: flex; gap: 1rem; align-items: center;">
                <div class="cart-btn" id="cartToggle">
                    üõí <span id="cartCount">0</span>
                </div>
                <div class="mobile-menu-btn">‚ò∞</div>
            </div>
        </div>
    </header>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3>Your Basket</h3>
            <span class="close-cart" id="closeCart">&times;</span>
        </div>
        <div class="cart-items" id="cartItems">
            <!-- Items injected by JS -->
            <p style="text-align:center; padding: 2rem;">Your basket is empty.</p>
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span id="cartTotal">‚Çπ 0</span>
            </div>
            <a href="checkout.html" class="btn btn-primary"
                style="width: 100%; text-align: center; display: block;">Checkout</a>
        </div>
    </div>
    <div class="cart-overlay" id="cartOverlay"></div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">Product added to bag!</div>

    <!-- Main Content -->
    
<section class="meesho-payment-section">
    <!-- Progress Bar -->
    <div class="checkout-progress-container">
        <div class="progress-step active">
            <div class="step-circle">‚úì</div>
            <span>Review</span>
        </div>
        <div class="progress-line"></div>
        <div class="progress-step current">
            <div class="step-circle">2</div>
            <span>Payment</span>
        </div>
    </div>

    <div class="container">
        <div class="checkout-grid">
            <!-- Left Column: Payment Methods -->
            <div class="payment-methods-column">
                <h2 class="section-title">Select Payment Method</h2>

                <form id="paymentForm">
                    <!-- COD Option -->
                    <label class="meesho-option-card selected">
                        <div class="option-details">
                            <span class="price-val">‚Çπ 0</span>
                            <span class="method-text">Cash on Delivery üíµ</span>
                        </div>
                        <input type="radio" name="payment_method" value="Cash on Delivery" checked
                            onchange="updateSelectedCard(this)">
                        <div class="meesho-radio-status"></div>
                    </label>

                    <!-- Scan & Pay (My QR) -->
                    <label class="meesho-option-card">
                        <div class="option-content-wrapper" style="width: 100%;">
                            <div class="option-prices">
                                <p class="online-price-row">
                                    <span class="strike-price">‚Çπ 20</span>
                                    <span class="active-price">‚Çπ 0</span>
                                </p>
                                <span class="save-tag">Save ‚Çπ20</span>
                            </div>
                            <div class="option-text-row">
                                <span class="method-text">Scan & Pay (Shop QR) üñºÔ∏è</span>
                            </div>

                            <!-- QR Code Hidden by Default -->
                            <div id="qr-code-display" class="qr-code-container"
                                style="display: none; margin-top: 1rem;">
                                <img src="/static/images/shop_payment_qr.png" alt="Shop QR Code" class="qr-image">
                                <p class="qr-instruction">Scan this QR to pay directly to Ayush Jadhav</p>
                                <p style="font-size: 0.75rem; color: #ef4444; margin-top: 0.5rem; font-weight: 700;">‚ö†Ô∏è
                                    After paying, click 'Place Order' below</p>
                            </div>
                        </div>
                        <input type="radio" name="payment_method" value="QR Payment"
                            onchange="updateSelectedCard(this)">
                        <div class="meesho-radio-status"></div>
                    </label>

                    <!-- UPI Option (Google Pay, Paytm) -->
                    <label class="meesho-option-card">
                        <div class="option-content-wrapper">
                            <div class="option-prices">
                                <p class="online-price-row">
                                    <span class="strike-price">‚Çπ 20</span>
                                    <span class="active-price">‚Çπ 0</span>
                                </p>
                                <span class="save-tag">Save ‚Çπ20</span>
                            </div>
                            <div class="option-text-row">
                                <span class="method-text">UPI (Google Pay, Paytm, PhonePe) üì≤</span>
                            </div>
                        </div>
                        <div class="extra-offer-banner">
                            üöÄ Instant discount applied via UPI
                        </div>
                        <input type="radio" name="payment_method" value="UPI" onchange="updateSelectedCard(this)">
                        <div class="meesho-radio-status"></div>
                    </label>

                    <!-- Online/Card Option -->
                    <label class="meesho-option-card">
                        <div class="option-content-wrapper">
                            <div class="option-prices">
                                <p class="online-price-row">
                                    <span class="strike-price">‚Çπ 20</span>
                                    <span class="active-price">‚Çπ 0</span>
                                </p>
                                <span class="save-tag">Save ‚Çπ20</span>
                            </div>
                            <div class="option-text-row">
                                <span class="method-text">Debit / Credit Card / Netbanking üí≥</span>
                            </div>
                        </div>
                        <input type="radio" name="payment_method" value="Online Payment"
                            onchange="updateSelectedCard(this)">
                        <div class="meesho-radio-status"></div>
                    </label>

                    <!-- Cashfree Option -->
                    <label class="meesho-option-card">
                        <div class="option-content-wrapper">
                            <div class="option-prices">
                                <p class="online-price-row">
                                    <span class="strike-price">‚Çπ 20</span>
                                    <span class="active-price">‚Çπ 0</span>
                                </p>
                                <span class="save-tag">Save ‚Çπ20</span>
                            </div>
                            <div class="option-text-row">
                                <span class="method-text">Cashfree (Cards, UPI, Wallets) üí∏</span>
                            </div>
                        </div>
                        <div class="extra-offer-banner">
                            ‚ú® Safe & Secure via Cashfree
                        </div>
                        <input type="radio" name="payment_method" value="Cashfree" onchange="updateSelectedCard(this)">
                        <div class="meesho-radio-status"></div>
                    </label>

                    <!-- Reselling Card (UI Only) -->
                    <div class="reselling-card">
                        <div class="reselling-info">
                            <h3>Reselling the order?</h3>
                            <p>Click on 'Yes' to add Final Price</p>
                        </div>
                        <div class="reselling-toggle">
                            <button type="button" class="toggle-btn active">No</button>
                            <button type="button" class="toggle-btn">Yes</button>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Right Column: Price Summary -->
            <div class="price-details-column">
                <div class="meesho-summary-card">
                    <h2 class="card-title" id="paymentItemsCount">Price Details (0 Items)</h2>

                    <div class="price-row">
                        <span>Total Product Price</span>
                        <span id="paymentTotalPrice">+ ‚Çπ 0</span>
                    </div>

                    <div class="price-row success-text">
                        <span>Total Discounts</span>
                        <span id="paymentTotalDiscount">- ‚Çπ 0</span>
                    </div>

                    <div class="price-divider"></div>

                    <div class="price-row final-total-row">
                        <span>Order Total</span>
                        <span id="paymentFinalTotal">‚Çπ 0</span>
                    </div>

                    <div class="discount-celebration" id="paymentDiscountCelebration">
                        üéâ Yay! Your total discount is ‚Çπ 0
                    </div>

                    <button type="button" id="placeOrderBtn" class="meesho-place-order-btn">Place Order</button>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Payment SDKs -->
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script src="https://sdk.cashfree.com/js/v3/cashfree.js"></script>

<script>
    function updateSelectedCard(radio) {
        document.querySelectorAll('.meesho-option-card').forEach(card => {
            card.classList.remove('selected');
        });
        radio.closest('.meesho-option-card').classList.add('selected');

        // Handle QR Code Visibility
        const qrDisplay = document.getElementById('qr-code-display');
        if (radio.value === 'QR Payment') {
            qrDisplay.style.display = 'block';
        } else {
            qrDisplay.style.display = 'none';
        }
    }

    document.addEventListener('DOMContentLoaded', () => {
        const cart = JSON.parse(localStorage.getItem('swara_cart')) || {};
        const items = Object.values(cart);

        const totalPrice = items.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        const discount = totalPrice > 5000 ? totalPrice * 0.10 : 0;
        const finalTotal = totalPrice - discount;

        document.getElementById('paymentItemsCount').textContent = `Price Details (${items.length} Items)`;
        document.getElementById('paymentTotalPrice').textContent = `+ ‚Çπ ${totalPrice.toLocaleString('en-IN')}`;
        document.getElementById('paymentTotalDiscount').textContent = `- ‚Çπ ${discount.toLocaleString('en-IN')}`;
        document.getElementById('paymentFinalTotal').textContent = `‚Çπ ${finalTotal.toLocaleString('en-IN')}`;
        document.getElementById('paymentDiscountCelebration').textContent = `üéâ Yay! Your total discount is ‚Çπ ${discount.toLocaleString('en-IN')}`;

        // Update price values in the radio options
        document.querySelectorAll('.price-val').forEach(el => {
            el.textContent = `‚Çπ ${finalTotal.toLocaleString('en-IN')}`;
        });
        document.querySelectorAll('.active-price').forEach(el => {
            el.textContent = `‚Çπ ${finalTotal.toLocaleString('en-IN')}`;
        });
        document.querySelectorAll('.strike-price').forEach(el => {
            el.textContent = `‚Çπ ${(finalTotal + 20).toLocaleString('en-IN')}`;
        });
    });

    document.getElementById('placeOrderBtn').onclick = function (e) {
        const paymentMethod = document.querySelector('input[name="payment_method"]:checked').value;

        if (paymentMethod === 'Cash on Delivery' || paymentMethod === 'QR Payment') {
            alert('Order Placed Successfully! (Simulation)');
            localStorage.removeItem('swara_cart');
            window.location.href = 'index.html';
        } else {
            alert('Online Payments require a backend server. In this static version, please use Cash on Delivery or QR Pay for simulation.');
        }
    };
</script>


    <!-- Footer -->
    <footer id="contact">
        <div class="container">
            <img src="static/images/logo.jpg" alt="Swara's Fashion Footer Logo"
                class="footer-brand-logo">
            <p>Redefining Luxury Ethnic Wear</p>
            <br>
            <div class="copyright">
                &copy; 2026 Swara's Fashion. All rights reserved.
            </div>
        </div>
    </footer>

    <script src="static/script.js"></script>
    
</body>

</html>